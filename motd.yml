---
- name: Criar MOTD personalizado para o usuÃ¡rio 'suporte'
  hosts: all
  become: true
  tasks:

    - name: Criar o script /etc/profile.d/motd.sh
      ansible.builtin.copy:
        dest: /etc/profile.d/motd.sh
        owner: root
        group: root
        mode: '0755'
        content: |
          #!/bin/bash

# Verifica se o usuÃ¡rio Ã© "suporte"
if [[ "$USER" == "suporte" ]]; then
        hostname=$(echo "$HOSTNAME")
        dominio=$(echo "$hostname" | tr '[:upper:]' '[:lower:]' | sed 's/^srv-//' | sed 's/-/./g')
        dominio="${dominio}.com.br"
        echo "===================================="
        echo " ğŸ–¥ï¸ Servidor: $(hostname)"
        echo " ğŸ“… Data: $(date)"
        echo " â³ Uptime: $(uptime -p)"
        echo " ğŸ“Š UsuÃ¡rios logados: $(who | wc -l)"
        echo " ğŸŒ EspaÃ§o livre no disco: $(df -h / | tail -1 | awk '{print $4}')"
        echo " ğŸ“¦ VersÃ£o USCall: $(rpm -q uscall)"
        echo " ğŸ·ï¸ DNS: $dominio"
        echo "===================================="
fi
